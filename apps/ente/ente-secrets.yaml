apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: ente-secrets
  namespace: ente
  annotations:
    argocd.argoproj.io/sync-wave: "-1"
spec:
  refreshInterval: 1h
  secretStoreRef:
    kind: ClusterSecretStore
    name: doppler
  target:
    name: ente-secrets
    creationPolicy: Owner
  data:
    # PostgreSQL credentials
    - secretKey: postgres-user
      remoteRef:
        key: ENTE_POSTGRES_USER
    - secretKey: postgres-password
      remoteRef:
        key: ENTE_POSTGRES_PASSWORD
    # MinIO credentials
    - secretKey: minio-root-user
      remoteRef:
        key: ENTE_MINIO_ROOT_USER
    - secretKey: minio-root-password
      remoteRef:
        key: ENTE_MINIO_ROOT_PASSWORD
    # Museum encryption keys
    - secretKey: encryption-key
      remoteRef:
        key: ENTE_ENCRYPTION_KEY
    - secretKey: jwt-secret
      remoteRef:
        key: ENTE_JWT_SECRET
